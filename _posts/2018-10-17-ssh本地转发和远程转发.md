---
layout: post
categories: tech
title: 
---
## ssh本地转发和远程转发


#### 1. 本地转发和例子

```shell
    本地机器A---能访问------>跳板机B----->能访问------>远程服务器C

    本地机器A-------------不能访问------------------>远程服务器C

    本地机器A----->通过本机端口以跳板机B的名义访问------>远程服务器C

```

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">

<script src="/js/mermaid.min.js"></script>
<div class="mermaid">
graph LR
ssh(fa:fa-user ssh命令)-->A
subgraph 
    A[本地机器A] --> B(跳板机jp)
    B(跳板机B) --> C[远程服务器C]
    classDef green fill:#9f6,stroke:#333,stroke-width:2px;
    classDef blue fill:#78f,stroke:#333,stroke-width:2px;
    classDef orange fill:#f96,stroke:#333,stroke-width:4px;
    class A green
    class B orange
    class C blue
end
</div>

本地转发在A机器上执行的命令：
```shell
ssh -L 12307:10.148.83.72:12308 user@B
```

#### 2. 远程转发和例子

<script src="/js/mermaid.min.js"></script>
<div class="mermaid">
graph LR
ssh(ssh命令 fa:fa-user)-->B
subgraph 
    A[本地机器A] --> B(跳板机jp)
    B(跳板机B) --> C[远程服务器C]
    classDef green fill:#9f6,stroke:#333,stroke-width:2px;
    classDef blue fill:#78f,stroke:#333,stroke-width:2px;
    classDef orange fill:#f96,stroke:#333,stroke-width:4px;
    class A green
    class B orange
    class C blue
end
</div>

远程转发在B机器上执行的命令：
```shell
ssh -R 12307:10.148.83.72:12308 user@A
```


#### [Ref]

[https://www.jianshu.com/p/558781768505](https://www.jianshu.com/p/558781768505)
[https://blog.csdn.net/evandeng2009/article/details/51926797](https://blog.csdn.net/evandeng2009/article/details/51926797)
[https://blog.csdn.net/yzs2012/article/details/76850844](https://blog.csdn.net/yzs2012/article/details/76850844)
[mermaid.min.js](<script src="https://unpkg.com/mermaid@7.1.0/dist/mermaid.min.js" charset="utf-8"></script>)
